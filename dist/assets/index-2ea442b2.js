import{r as m,j as e}from"./index-aeda1e87.js";import{U as me,D as pe,e as he}from"./save_excel-2f1f7d40.js";import{a as ue,C as xe}from"./axios-057734f1.js";import{F as o}from"./index-9f5a0d13.js";import{M as K,P as H,D as Y}from"./DeleteOutlined-67da6863.js";import{I as x,E as fe,a as ye}from"./Pagination-637f931d.js";import{S as U}from"./index-cd8267bc.js";import{B as d,E as ge}from"./EditOutlined-3f21ada2.js";import{S as y}from"./index-c463ec7e.js";import{T as ke,a as je}from"./index-e00a8a8b.js";import{L as Ie}from"./index-06592163.js";import{S as be,n as A}from"./SyncOutlined-80c16cfc.js";import{P as Se}from"./PlusOutlined-74a5f9c7.js";import{S as we}from"./SlidersOutlined-a42c1d94.js";import"./useFlexGapSupport-69780201.js";import"./FileSaver.min-b2a08254.js";import"./row-da0b9f45.js";import"./responsiveObserver-953ba023.js";import"./col-bebaa28a.js";import"./index-d904ea6a.js";import"./Sider-20598f97.js";import"./useNotification-4ae4ff01.js";const R={bsc:"https://api.bscscan.com",ftm:"https://api.ftmscan.com",metis:"https://andromeda-explorer.metis.io",avax:"https://api.snowtrace.io",matic:"https://api.polygonscan.com",arb:"https://api.arbiscan.io",op:"https://api-optimistic.etherscan.io",eth:"https://api.etherscan.io"},Ce={bsc:["IHA6XUNGC9A8CS1EVB4ZKMMNCEVWQYWGNF","35GX1RBQBNKDSS2QFF8YZ9IJ4MUPD8FBV4","KD21NU93H2696XZGUE6IIZX291V2291WBZ"],ftm:["7NS7WM87WNYTDWXFRUP1QFVEGEMEWWTT1R","JUEKUR5XBG5Z4WQUV71IZHJCPGVWADGHY3","YCTIQFTS8AXJQVE84CYY2FSGU9JYHWTEMN"],metis:[null],avax:["XZVMR1A53KHXIEZV2X5QYZ2GSYFDDHUGVS","PX4ZC7BFCMF51E7DC7JKDWERHYCW8JNPM7","B4XCRBZYZX26NGZG1XJB7UIDGDWF8TYSHT"],matic:["5N7B38PZTENUK44XDF3WUPFFN68ICZ87Y3","SIKU51V7YGAYUZF8HJ7R5FE6WHBP4Z6VEI","SMIPK99XJR9IXRSSCDHWJB8CT4YKTKJC4E"],arb:["FTAT7G2F45P8VNVQG66SGF7T4TS6R2QFGY","MXKDX8ZX8H5P34WFXFZF1YEPA6X6DDIV5R","WBCVFF7GVC4XJZFMS3EZJVVPMAH14IT7SU"],op:["C8JSVBMBI2NBBYWUJ99ZR2QCQ8GB33NFGB"],eth:["FPFT5EGK6F4JS97IA4E8SI24UN559W53VI","XHSCQN5JZHT4WY1JCATJTN4IDGX2PU6WHH","ADX2IDIUKD57WAM1GN6YA9E9Y9R3W5CXMC"]};let W={};async function J(l,i){console.log(i);const N=Object.keys(R).map(async c=>{try{const p=R[c];let h;if(i&&c in i&&i[c])h=i[c];else{const f=Ce[c],F=Math.floor(Math.random()*f.length);h=f[F]}let w=0;l=l.toLowerCase();let v;c==="avax"?v=`https://api.routescan.io/v2/network/mainnet/evm/1/etherscan/api?module=account&action=txlist&address=${l}&startblock=0&endblock=99999999&page=1&offset=10&sort=asc`:h===null?v=`${p}/api?module=account&action=txlist&address=${l}&startblock=0&endblock=99999999&page=1&offset=10000&sort=asc`:v=`${p}/api?module=account&action=txlist&address=${l}&startblock=0&endblock=99999999&page=1&offset=10000&sort=asc&apikey=${h}`;const C=await ue.get(v);for(let f=0;f<C.data.result.length;f++){const F=C.data.result[f].input.slice(0,10);C.data.result[f].from===l&&C.data.result[f].txreceipt_status==="1"&&["0x9fbf10fc","0x1114cd2a","0xc858f5f9","0x76a9099a","0x2e15238c","0xae30f6ee","0xc45dec27","0x2cdf0b95","0x879762e2","0x656f3d64","0x51905636","0xad660825","0xfe359a0d","0xca23bb4c","0x00000005"].includes(F)&&(w+=1)}return{net:c,tx:w}}catch(p){return console.log(p.message),{net:c,tx:"error"}}}),M=await Promise.all(N);let T=0;return M.forEach(({net:c,tx:p})=>{p!=="error"&&(T+=p),W[c]=p}),W.total=T,W}const{Content:Fe}=Ie,{TextArea:Ee}=x,Le=()=>{const[l,i]=m.useState([]),[N,M]=m.useState(!1),[T]=o.useForm(),[c]=o.useForm(),[p]=o.useForm(),[h,w]=m.useState([]),[v,C]=m.useState(!1),[f,F]=m.useState(!1),[G,O]=m.useState(!1),[z,Z]=m.useState(!1),[P,_]=m.useState(localStorage.getItem("l0_api_key")),[L,Q]=m.useState(0),[V,$]=m.useState(!1),q=()=>{$(!V)},ee=()=>V?e.jsx(fe,{}):e.jsx(ye,{});m.useEffect(()=>{const t=()=>{Q(window.innerHeight-180)};return window.addEventListener("resize",t),t(),()=>{window.removeEventListener("resize",t)}},[]);const te=()=>{he(l,"LayerZeroInfo")},se=()=>{if(!h.length){A.error({message:"错误",description:"请先选择要删除的地址"},2);return}i(l.filter(t=>!h.includes(t.key))),localStorage.setItem("l0_addresses",JSON.stringify(l.filter(t=>!h.includes(t.key)))),w([])},ae=t=>{i(l.filter(a=>a.key!==t)),localStorage.setItem("l0_addresses",JSON.stringify(l.filter(a=>a.key!==t)))},ne=async()=>{try{const t=await T.validateFields();if(t.address.startsWith("0x")||(t.address="0x"+t.address),t.address.length!==42){A.error({message:"错误",description:"请输入正确的EVM地址"},2);return}M(!1);const a=l.findIndex(n=>n.address===t.address);if(a!==-1){i(l.map((s,u)=>u===a?{...s,name:t.name}:s));const n=[...l];J(t.address,P).then(({arb:s,avax:u,bsc:r,eth:g,ftm:k,matic:j,metis:I,op:b,total:S})=>{n[a]={...n[a],arb:s,avax:u,bsc:r,eth:g,ftm:k,matic:j,metis:I,op:b,total:S},i(n),localStorage.setItem("l0_addresses",JSON.stringify(l))})}else{const n={key:l.length.toString(),name:t.name,address:t.address,arb:null,avax:null,bsc:null,eth:null,ftm:null,matic:null,metis:null,op:null,total:null},s=[...l,n];i(s),J(t.address,P).then(({arb:u,avax:r,bsc:g,eth:k,ftm:j,matic:I,metis:b,op:S,total:E})=>{n.arb=u,n.avax=r,n.bsc=g,n.eth=k,n.ftm=j,n.matic=I,n.metis=b,n.op=S,n.total=E,i([...s]),localStorage.setItem("l0_addresses",JSON.stringify(s))})}}catch(t){A.error({message:"错误",description:t.message},2)}finally{T.resetFields()}},le=async()=>{if(!h.length){A.error({message:"错误",description:"请先选择要刷新的地址"},2);return}C(!0);try{const t=[...l];for(let a of h){const n=t.findIndex(s=>s.key===a);if(n!==-1){const s=t[n];s.eth=null,s.bsc=null,s.ftm=null,s.matic=null,s.metis=null,s.op=null,s.arb=null,s.avax=null,s.total=null,i([...t]);const{arb:u,avax:r,bsc:g,eth:k,ftm:j,matic:I,metis:b,op:S,total:E}=await J(s.address,P);s.arb=u,s.avax=r,s.bsc=g,s.eth=k,s.ftm=j,s.matic=I,s.metis=b,s.op=S,s.total=E,i([...t]),localStorage.setItem("l0_addresses",JSON.stringify(l))}}}catch(t){A.error({message:"错误",description:t.message},2)}finally{C(!1),w([])}},re=async()=>{try{const a=(await c.validateFields()).addresses.split(`
`),n=[...l];for(let s of a){if(s.startsWith("0x")||(s="0x"+s),s=s.trim(),s.length!==42){A.error({message:"错误",description:"请输入正确的地址"});continue}const u=n.findIndex(r=>r.address===s);if(u!==-1){const r=[...n],{arb:g,avax:k,bsc:j,eth:I,ftm:b,matic:S,metis:E,op:D,total:X}=await J(s,P);r[u]={...r[u],arb:g,avax:k,bsc:j,eth:I,ftm:b,matic:S,metis:E,op:D,total:X},i(r),localStorage.setItem("l0_addresses",JSON.stringify(r))}else{const r={key:n.length.toString(),address:s,arb:null,avax:null,bsc:null,eth:null,ftm:null,matic:null,metis:null,op:null,total:null};n.push(r),i(n);const{arb:g,avax:k,bsc:j,eth:I,ftm:b,matic:S,metis:E,op:D,total:X}=await J(s,P);r.arb=g,r.avax=k,r.bsc=j,r.eth=I,r.ftm=b,r.matic=S,r.metis=E,r.op=D,r.total=X,i([...n]),localStorage.setItem("l0_addresses",JSON.stringify(n))}}F(!1)}catch(t){A.error({message:"错误",description:t.message})}finally{c.resetFields(),w([])}},[ie,B]=m.useState(null),oe=[{title:"#",key:"index",render:(t,a,n)=>n+1,align:"center",width:40},{title:"备注",dataIndex:"name",key:"name",align:"center",render:(t,a)=>a.key===ie?e.jsx(x,{placeholder:"请输入备注",defaultValue:t,onPressEnter:s=>{a.name=s.target.value,i([...l]),localStorage.setItem("l0_addresses",JSON.stringify(l)),B(null)}}):e.jsxs(e.Fragment,{children:[e.jsx(je,{color:"blue",onClick:()=>B(a.key),children:t}),!t&&e.jsx(d,{shape:"circle",icon:e.jsx(ge,{}),size:"small",onClick:()=>B(a.key)})]}),width:80},{title:e.jsxs("span",{children:["钱包地址",e.jsx("span",{onClick:q,style:{marginLeft:8,cursor:"pointer"},children:ee()})]}),dataIndex:"address",key:"address",align:"center",render:(t,a)=>V?"***":t,width:350},{title:"ETH",dataIndex:"eth",key:"eth",render:(t,a)=>t===null?e.jsx(y,{}):t,align:"center",width:80},{title:"MATIC",dataIndex:"matic",key:"matic",render:(t,a)=>t===null?e.jsx(y,{}):t,align:"center",width:80},{title:"BSC",dataIndex:"bsc",key:"bsc",render:(t,a)=>t===null?e.jsx(y,{}):t,align:"center",width:80},{title:"ARB",dataIndex:"arb",key:"arb",width:80,render:(t,a)=>t===null?e.jsx(y,{}):t,align:"center"},{title:"OP",dataIndex:"op",key:"op",width:80,render:(t,a)=>t===null?e.jsx(y,{}):t,align:"center"},{title:"AVAX",dataIndex:"avax",key:"avax",width:80,render:(t,a)=>t===null?e.jsx(y,{}):t,align:"center"},{title:"FTM",dataIndex:"ftm",key:"ftm",width:80,render:(t,a)=>t===null?e.jsx(y,{}):t,align:"center"},{title:"METIS",dataIndex:"metis",key:"metis",width:80,render:(t,a)=>t===null?e.jsx(y,{}):t,align:"center"},{title:"总Tx",dataIndex:"total",key:"total",width:80,render:(t,a)=>t===null?e.jsx(y,{}):t,align:"center"},{title:"操作",key:"action",width:80,render:(t,a)=>e.jsx(U,{size:"small",children:e.jsx(H,{title:"确定删除吗？",onConfirm:()=>ae(a.key),children:e.jsx(d,{icon:e.jsx(Y,{})})})}),align:"center"}];m.useEffect(()=>{Z(!0);const t=localStorage.getItem("l0_addresses");setTimeout(()=>{Z(!1)},500),t&&i(JSON.parse(t))},[]);const ce=()=>{localStorage.setItem("l0_api_key",JSON.stringify(p.getFieldsValue())),O(!1),_(JSON.parse(localStorage.getItem("l0_api_key")))};m.useEffect(()=>{const t=localStorage.getItem("l0_api_key");t&&(_(JSON.parse(t)),p.setFieldsValue(JSON.parse(t)))},[]);const de={selectedRowKeys:h,onChange:t=>{w(t)}};return e.jsx("div",{children:e.jsxs(Fe,{children:[e.jsx(K,{title:"批量添加地址",open:f,onOk:re,onCancel:()=>{F(!1),c.resetFields()},okText:"添加地址",cancelText:"取消",children:e.jsx(o,{form:c,layout:"vertical",children:e.jsx(o.Item,{label:"地址",name:"addresses",rules:[{required:!0}],children:e.jsx(Ee,{placeholder:"请输入地址，每行一个",style:{width:"500px",height:"200px"}})})})}),e.jsx(K,{title:"添加地址",open:N,onOk:ne,onCancel:()=>M(!1),okText:"添加地址",cancelText:"取消",children:e.jsxs(o,{form:T,layout:"vertical",children:[e.jsx(o.Item,{label:"地址",name:"address",rules:[{required:!0}],children:e.jsx(x,{placeholder:"请输入地址"})}),e.jsx(o.Item,{label:"备注",name:"name",children:e.jsx(x,{placeholder:"请输入备注"})})]})}),e.jsx(K,{title:e.jsxs(e.Fragment,{children:[e.jsx("div",{children:"更换API Key"}),e.jsx("div",{style:{fontSize:"12px",color:"#888"},children:e.jsxs(U,{children:[e.jsx(d,{type:"link",onClick:()=>window.open("https://etherscan.io/myapikey","_blank"),children:"Eth"}),e.jsx(d,{type:"link",onClick:()=>window.open("https://polygonscan.com/myapikey","_blank"),children:"Matic"}),e.jsx(d,{type:"link",onClick:()=>window.open("https://bscscan.com/myapikey","_blank"),children:"Bsc"}),e.jsx(d,{type:"link",onClick:()=>window.open("https://arbiscan.io/myapikey","_blank"),children:"Arb"}),e.jsx(d,{type:"link",onClick:()=>window.open("https://optimistic.etherscan.io/myapikey","_blank"),children:"Op"}),e.jsx(d,{type:"link",onClick:()=>window.open("https://snowtrace.io/myapikey","_blank"),children:"Avax"}),e.jsx(d,{type:"link",onClick:()=>window.open("https://ftmscan.com/myapikey","_blank"),children:"Ftm"})]})})]}),open:G,onOk:ce,onCancel:()=>O(!1),okText:"确定",cancelText:"取消",children:e.jsxs(o,{form:p,layout:"horizontal",children:[e.jsx(o.Item,{label:"Eth",name:"eth",children:e.jsx(x,{placeholder:"请输入Etherscan API Key"})}),e.jsx(o.Item,{label:"Polygon",name:"matic",children:e.jsx(x,{placeholder:"请输入Polygonscan API Key"})}),e.jsx(o.Item,{label:"Bsc",name:"bsc",children:e.jsx(x,{placeholder:"请输入Bscscan API Key"})}),e.jsx(o.Item,{label:"Arb",name:"arb",children:e.jsx(x,{placeholder:"请输入Arbitrumscan API Key"})}),e.jsx(o.Item,{label:"Op",name:"op",children:e.jsx(x,{placeholder:"请输入Optimismscan API Key"})}),e.jsx(o.Item,{label:"Avax",name:"avax",children:e.jsx(x,{placeholder:"请输入Avalanche API Key"})}),e.jsx(o.Item,{label:"Ftm",name:"ftm",children:e.jsx(x,{placeholder:"请输入Fantomscan API Key"})})]})}),e.jsx(y,{spinning:z,children:e.jsx(ke,{columns:oe,dataSource:l,rowSelection:de,pagination:!1,bordered:!0,size:"small",scroll:{y:L}})}),e.jsx(xe,{children:e.jsxs("div",{style:{width:"100%",display:"flex",justifyContent:"space-between"},children:[e.jsx(d,{type:"primary",onClick:le,loading:v,size:"large",style:{width:"15%"},icon:e.jsx(be,{}),children:"刷新选中地址"}),e.jsx(d,{type:"primary",onClick:()=>{M(!0)},size:"large",style:{width:"15%"},icon:e.jsx(Se,{}),children:"添加地址"}),e.jsx(d,{type:"primary",onClick:()=>{F(!0)},size:"large",style:{width:"15%"},icon:e.jsx(me,{}),children:"批量添加地址"}),e.jsx(H,{title:"确认删除"+h.length+"个地址？",onConfirm:se,children:e.jsx(d,{type:"primary",danger:!0,size:"large",style:{width:"15%"},icon:e.jsx(Y,{}),children:"删除选中地址"})}),e.jsx(d,{type:"primary",onClick:()=>{O(!0)},size:"large",style:{width:"15%"},icon:e.jsx(we,{}),children:"更换API KEY"}),e.jsx(d,{type:"primary",icon:e.jsx(pe,{}),size:"large",style:{width:"8%"},onClick:te})]})})]})})};export{Le as default};
