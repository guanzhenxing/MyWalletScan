import{r as p,j as n}from"./index-aeda1e87.js";import"./FileSaver.min-b2a08254.js";import{g as ne}from"./getZksTasks-d8149c67.js";import{F as C}from"./index-9f5a0d13.js";import{S as d}from"./index-c463ec7e.js";import{T as Ce,a as Fe}from"./index-e00a8a8b.js";import{C as Ee}from"./axios-057734f1.js";import{B as te,E as ze}from"./EditOutlined-3f21ada2.js";import{L as ve}from"./index-06592163.js";import{S as Se,n as ae}from"./SyncOutlined-80c16cfc.js";import{m as oe}from"./index-a00c1fcb.js";import{I as Pe,E as De,a as Ie}from"./Pagination-637f931d.js";import"./useFlexGapSupport-69780201.js";import"./index-cd8267bc.js";import"./row-da0b9f45.js";import"./responsiveObserver-953ba023.js";import"./col-bebaa28a.js";import"./PlusOutlined-74a5f9c7.js";import"./Sider-20598f97.js";import"./useNotification-4ae4ff01.js";const{Content:_e}=ve;function We(){p.useState(0),p.useState(0),p.useState(!1),p.useState({});const[x,F]=p.useState([]);p.useState(!1),p.useState(!1),C.useForm(),C.useForm();const[y,E]=p.useState([]);C.useForm(),p.useState(!1);const[z,w]=p.useState(!1),[le,v]=p.useState(!1),[k,S]=p.useState(new Map),[ie,g]=p.useState([]),[ce,de]=p.useState(!1),[ue,pe]=p.useState(0),[j,he]=p.useState(!1),P="0x981F198286E40F9979274E0876636E9144B8FB8E",D="0xAE23B6E7f91DDeBD3B70d74d20583E3e674Bd94f",I="0xB235Cea7666d4379ca29e9Ad4ba2787e504192a8",_="0x5B91962F5ECa75E6558E4d32Df69B30f75cc6FE5",A="0x130E377d507A62C9ECcbd9E7E5Ad2Fd3BE551f48",B="0x18381c0f738146Fb694DE18D1106BdE2BE040Fa4",L="0x36A1aCbbCAfca2468b85011DDD16E7Cb4d673230",T="0xf8b59f3c3Ab33200ec80a8A58b2aA5F5D2a8944C",O="0xC5db68F30D21cBe0C9Eac7BE5eA83468d69297e6",N="0x04e9Db37d8EA0760072e1aCE3F2A219988Fdac29",R="0xd999E16e68476bC749A28FC14a0c3b6d7073F50c",J="0xf5E67261CB357eDb6C7719fEFAFaaB280cB5E2A6",K="0x39e098a153ad69834a9dac32f0fca92066ad03f4",M="0x6C31035D62541ceba2Ac587ea09891d1645D6D07",H="0x9606eC131EeC0F84c95D82c9a63959F2331cF2aC",Z="0x943ac2310D9BC703d6AB5e5e76876e212100f894",V="0x6e2B76966cbD9cF4cC2Fa0D76d24d5241E0ABC2F",$="0xbE7D1FD1f6748bbDefC4fbaCafBb11C6Fc506d1d",Q="0x8B791913eB07C32779a16750e3868aA8495F5964",U="0x2da10a1e27bf85cedd8ffb1abbe97e53391c0295",X="0xb9061E38FeE7d30134F56aEf7117E2F6d1580666",Y="0x1e8F1099a3fe6D2c1A960528394F4fEB8f8A288D",q="0x01541EaD71e41d59f315eB2cE3a9441eD7b0A63E",G="0x767b4A087c11d7581Ac95eaFfc1FeBFA26bad3d2",W="0x1BbD33384869b30A323e15868Ce46013C82B86FB",ee="0x1181D7BE04D80A8aE096641Ee1A87f7D557c6aeb",re="0x90973213E2a230227BD7CCAfB30391F4a52439ee",se="0x22D8b71599e14F20a49a397b88c1C878c86F5579",fe=()=>{he(!j)},me=()=>j?n.jsx(De,{}):n.jsx(Ie,{}),xe=async()=>{try{const e=[...x],r=[];for(let t of e)r.push(()=>new Promise(a=>{const s=i(t.address,P);t.dmail=s,a()})),r.push(()=>new Promise(a=>{const s=i(t.address,D);t.nameservice=s,a()})),r.push(()=>new Promise(a=>{const s=i(t.address,I);t.zns=s,a()})),r.push(()=>new Promise(a=>{const s=i(t.address,_),u=i(t.address,A);t.rollup=s+u,a()})),r.push(()=>new Promise(a=>{const s=i(t.address,B);t.zkswap=s,a()})),r.push(()=>new Promise(a=>{const s=i(t.address,L);t.openocean=s,a()})),r.push(()=>new Promise(a=>{const s=i(t.address,T);t.pancake=s,a()})),r.push(()=>new Promise(a=>{const s=i(t.address,O),u=i(t.address,N);t.rf=s+u,a()})),r.push(()=>new Promise(a=>{const s=i(t.address,R),u=i(t.address,J);t.velo=s+u,a()})),r.push(()=>new Promise(a=>{const s=i(t.address,K);t.mav=s,a()})),r.push(()=>new Promise(a=>{const s=i(t.address,M);t.veSync=s,a()})),r.push(()=>new Promise(a=>{const s=i(t.address,H),u=i(t.address,Z);t.izumi=s+u,a()})),r.push(()=>new Promise(a=>{const s=i(t.address,V);t._1inch=s,a()})),r.push(()=>new Promise(a=>{const s=i(t.address,$);t.spacefi=s,a()})),r.push(()=>new Promise(a=>{const s=i(t.address,Q);t.mute=s,a()})),r.push(()=>new Promise(a=>{const s=i(t.address,U);t.sync=s,a()})),r.push(()=>new Promise(a=>{const s=i(t.address,X);t.okx=s,a()})),r.push(()=>new Promise(a=>{const s=i(t.address,Y),u=i(t.address,q);t.basilisk=s+u,a()})),r.push(()=>new Promise(a=>{const s=i(t.address,G);t.zerolend=s,a()})),r.push(()=>new Promise(a=>{const s=i(t.address,W),u=i(t.address,ee),h=i(t.address,re),m=i(t.address,se);t.eralend=s+u+h+m,a()}));await Promise.all(r.map(t=>t())),g([...e]),localStorage.setItem("addresses",JSON.stringify(e))}catch(e){console.error(e)}finally{w(!1)}},ke=async()=>{if(!y.length){ae.error({message:"错误",description:"请先选择要刷新的地址"},2);return}w(!0);try{const e=[...x],r=[];for(let t of y){const a=e.findIndex(s=>s.key===t);if(a!==-1){const s=e[a];console.log("..."),console.log(s);const u=new Map,m=(await ne(s.address))[0];S(u),await new Promise(l=>{setTimeout(()=>{l()},200)}),r.push(()=>new Promise(l=>{const o=c(s.address,P);s.dmail=o,l()})),r.push(()=>new Promise(l=>{const o=c(s.address,D);s.nameservice=o,l()})),r.push(()=>new Promise(l=>{const o=c(s.address,I);s.zns=o,l()})),r.push(()=>new Promise(l=>{const o=c(s.address,_),f=c(s.address,A);s.rollup=o+f,l()})),r.push(()=>new Promise(l=>{const o=c(s.address,B);s.zkswap=o,l()})),r.push(()=>new Promise(l=>{const o=c(s.address,L);s.openocean=o,l()})),r.push(()=>new Promise(l=>{const o=c(s.address,T);s.pancake=o,l()})),r.push(()=>new Promise(l=>{const o=c(s.address,O),f=c(s.address,N);s.rf=o+f,l()})),r.push(()=>new Promise(l=>{const o=c(s.address,R),f=c(s.address,J);s.velo=o+f,l()})),r.push(()=>new Promise(l=>{const o=c(s.address,K);s.mav=o,l()})),r.push(()=>new Promise(l=>{const o=c(s.address,M);s.veSync=o,l()})),r.push(()=>new Promise(l=>{const o=c(s.address,H),f=c(s.address,Z);s.izumi=o+f,l()})),r.push(()=>new Promise(l=>{const o=c(s.address,V);s._1inch=o,l()})),r.push(()=>new Promise(l=>{const o=c(s.address,$);s.spacefi=o,l()})),r.push(()=>new Promise(l=>{const o=c(s.address,Q);s.mute=o,l()})),r.push(()=>new Promise(l=>{const o=c(s.address,U);s.sync=o,l()})),r.push(()=>new Promise(l=>{const o=c(s.address,X);s.okx=o,l()})),r.push(()=>new Promise(l=>{const o=c(s.address,Y),f=c(s.address,q);s.basilisk=o+f,l()})),r.push(()=>new Promise(l=>{const o=c(s.address,G);s.zerolend=o,l()})),r.push(()=>new Promise(l=>{const o=c(s.address,W),f=c(s.address,ee),je=c(s.address,re),be=c(s.address,se);s.eralend=o+f+je+be,l()}))}}await Promise.all(r.map(t=>t())),g([...e]),localStorage.setItem("addresses",JSON.stringify(e)),oe.success("刷新成功")}catch(e){ae.error({message:"错误",description:e.message},2)}finally{w(!1),E([])}},i=(e,r)=>{r=r.toLowerCase();const t=k.get(e);return t==null?(oe.info("等待数据加载完成再刷新"),"error"):t.reduce((s,u)=>u===r?s+1:s,0)},c=(e,r)=>{const t=k.get(e);return r=r.toLowerCase(),t.reduce((s,u)=>u===r?s+1:s,0)};p.useEffect(()=>{const e=()=>{pe(window.innerHeight-180)};return window.addEventListener("resize",e),e(),()=>{window.removeEventListener("resize",e)}},[]),p.useEffect(()=>{v(!0);const e=localStorage.getItem("addresses");e&&(F(JSON.parse(e)),g(JSON.parse(e))),(async()=>{const t=JSON.parse(e);if(!t)return;const a=new Map;let s=[];const u=[];for(const h of t){const m=h.address,l=ne(m).then(o=>{a.set(m,o[0]),s.push(o[1])}).catch(o=>{console.error(`Error fetching tasks for address ${m}:`,o)});u.push(l)}try{await Promise.all(u),v(!1),S(a);const h=s.flat();localStorage.setItem("zks_timestamps",JSON.stringify(h))}catch(h){console.error("Error fetching task contracts:",h)}})()},[]),p.useEffect(()=>{!ce&&x.length>0&&k.size>0&&(xe(),de(!0))},[x,k]);const ye={selectedRowKeys:y,onChange:e=>{E(e)}},[we,b]=p.useState(null),ge=[{title:"#",key:"index",align:"center",render:(e,r,t)=>t+1,width:34.5},{title:"备注",dataIndex:"name",key:"name",align:"center",render:(e,r)=>r.key===we?n.jsx(Pe,{placeholder:"请输入备注",defaultValue:e,onPressEnter:a=>{r.name=a.target.value,F([...x]),localStorage.setItem("addresses",JSON.stringify(x)),b(null)}}):n.jsxs(n.Fragment,{children:[n.jsx(Fe,{color:"blue",onClick:()=>b(r.key),children:e}),!e&&n.jsx(te,{shape:"circle",icon:n.jsx(ze,{}),size:"small",onClick:()=>b(r.key)})]}),width:120},{title:n.jsxs("span",{children:["钱包地址",n.jsx("span",{onClick:fe,style:{marginLeft:8,cursor:"pointer"},children:me()})]}),dataIndex:"address",key:"address",align:"center",render:e=>j?"***":e,width:200},{title:"最后交易",dataIndex:"zks2_last_tx",key:"zks2_last_tx",align:"center",render:(e,r)=>{let t="inherit";return e===null?n.jsx(d,{}):(e!=null&&e.includes("天")&&parseInt(e)>7?t="red":t="#1677ff",n.jsx("a",{href:"https://era.zksync.network/address/"+r.address,target:"_blank",style:{color:t},children:e}))},width:80},{title:"进度",dataIndex:"progress",key:"progress",align:"center",sorter:(e,r)=>e.progress-r.progress,render:(e,r)=>{const t=["dmail","nameservice","zns","rollup","zkswap","openocean","pancake","rf","velo","mav","veSync","izumi","_1inch","spacefi","mute","sync","okx","basilisk","zerolend","eralend"],s=t.reduce((h,m)=>r[m]>0?h+1:h,0)/t.length*100;r.progress=s;const u=`rgba(240, 121, 78, ${s/100})`;return{children:n.jsx("span",{children:e===null?n.jsx(d,{}):`${s.toFixed(2)}%`}),props:{style:{background:u}}}},width:60},{title:n.jsxs("a",{href:"https://defillama.com/chain/zkSync Era",style:{color:"white"},target:"_blank",rel:"noopener noreferrer",children:["zkSyncEra Task List  [参考defillama TVL数据] ",n.jsx("br",{})]}),key:"zks_era_group",className:"zks_era",children:[{title:n.jsx("a",{href:"https://app.eralend.com/",target:"_blank",rel:"noopener noreferrer",children:"EraLend"}),dataIndex:"eralend",key:"eralend",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.eralend===e,render:(e,r)=>n.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?n.jsx(d,{}):e}),width:100},{title:n.jsx("a",{href:"https://app.zerolend.xyz/markets/",target:"_blank",rel:"noopener noreferrer",children:"ZeroLend"}),dataIndex:"zerolend",key:"zerolend",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.zerolend===e,render:(e,r)=>n.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?n.jsx(d,{}):e}),width:100},{title:n.jsx("a",{href:"https://app.basilisk.org/",target:"_blank",rel:"noopener noreferrer",children:"basilisk"}),dataIndex:"basilisk",key:"basilisk",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.basilisk===e,render:(e,r)=>n.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?n.jsx(d,{}):e}),width:100},{title:n.jsx("a",{href:"https://www.okx.com/cn/web3/dex",target:"_blank",rel:"noopener noreferrer",children:"OKX"}),dataIndex:"okx",key:"okx",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.okx===e,render:(e,r)=>n.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?n.jsx(d,{}):e}),width:100},{title:n.jsx("a",{href:"https://syncswap.xyz",target:"_blank",rel:"noopener noreferrer",children:"SyncSwap"}),dataIndex:"sync",key:"sync",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.sync===e,render:(e,r)=>n.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?n.jsx(d,{}):e}),width:100},{title:n.jsx("a",{href:"https://app.mute.io/swap",target:"_blank",rel:"noopener noreferrer",children:"Mute"}),dataIndex:"mute",key:"mute",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.mute===e,render:(e,r)=>n.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?n.jsx(d,{}):e}),width:100},{title:n.jsx("a",{href:"https://swap-zksync.spacefi.io/#/swap",target:"_blank",rel:"noopener noreferrer",children:"SpaceFi"}),dataIndex:"spacefi",key:"spacefi",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.spacefi===e,render:(e,r)=>n.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?n.jsx(d,{}):e}),width:100},{title:n.jsx("a",{href:"https://app.1inch.io",target:"_blank",rel:"noopener noreferrer",children:"1inch"}),dataIndex:"_1inch",key:"_1inch",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r._1inch===e,render:(e,r)=>n.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?n.jsx(d,{}):e}),width:100},{title:n.jsx("a",{href:"https://izumi.finance/trade/swap",target:"_blank",rel:"noopener noreferrer",children:"izumi"}),dataIndex:"izumi",key:"izumi",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.izumi===e,render:(e,r)=>n.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?n.jsx(d,{}):e}),width:100},{title:n.jsx("a",{href:"https://app.vesync.finance/swap",target:"_blank",rel:"noopener noreferrer",children:"veSync"}),dataIndex:"veSync",key:"veSync",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.veSync===e,render:(e,r)=>n.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?n.jsx(d,{}):e}),width:100},{title:n.jsx("a",{href:"https://app.mav.xyz/?chain=324",target:"_blank",rel:"noopener noreferrer",children:"Mav"}),dataIndex:"mav",key:"mav",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.mav===e,render:(e,r)=>n.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?n.jsx(d,{}):e}),width:100},{title:n.jsx("a",{href:"https://zksync.velocore.xyz/swap",target:"_blank",rel:"noopener noreferrer",children:"Velocore"}),dataIndex:"velo",key:"velo",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.velo===e,render:(e,r)=>n.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?n.jsx(d,{}):e}),width:100},{title:n.jsx("a",{href:"https://app.reactorfusion.xyz/",target:"_blank",rel:"noopener noreferrer",children:"Reactor"}),dataIndex:"rf",key:"rf",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.rf===e,render:(e,r)=>n.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?n.jsx(d,{}):e}),width:100},{title:n.jsx("a",{href:"https://pancakeswap.finance/swap?chain=zkSync",target:"_blank",rel:"noopener noreferrer",children:"PancakeSwap"}),dataIndex:"pancake",key:"pancake",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.pancake===e,render:(e,r)=>n.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?n.jsx(d,{}):e}),width:100},{title:n.jsx("a",{href:"https://app.openocean.finance/CLASSIC#/ZKSYNC/ETH/USDC",target:"_blank",rel:"noopener noreferrer",children:"OpenOcean"}),dataIndex:"openocean",key:"openocean",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.openocean===e,render:(e,r)=>n.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?n.jsx(d,{}):e}),width:100},{title:n.jsx("a",{href:"https://zkswap.finance/",target:"_blank",rel:"noopener noreferrer",children:"zkSwap"}),dataIndex:"zkswap",key:"zkswap",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.zkswap===e,render:(e,r)=>n.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?n.jsx(d,{}):e}),width:100},{title:n.jsx("a",{href:"https://app.rollup.finance/#/stake",target:"_blank",rel:"noopener noreferrer",children:"Rollup"}),dataIndex:"rollup",key:"rollup",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.rollup===e,render:(e,r)=>n.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?n.jsx(d,{}):e}),width:100},{title:n.jsx("a",{href:"https://zns.is/",target:"_blank",rel:"noopener noreferrer",children:"zns"}),dataIndex:"zns",key:"zns",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.zns===e,render:(e,r)=>n.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?n.jsx(d,{}):e}),width:100},{title:n.jsx("a",{href:"https://zkns.domains/",target:"_blank",rel:"noopener noreferrer",children:"NameService"}),dataIndex:"nameservice",key:"nameservice",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.zns===e,render:(e,r)=>n.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?n.jsx(d,{}):e}),width:100},{title:n.jsx("a",{href:"https://mail.dmail.ai/presale/395788",target:"_blank",rel:"noopener noreferrer",children:"dmail"}),dataIndex:"dmail",key:"dmail",align:"center",filters:[{text:"未完成",value:0}],onFilter:(e,r)=>r.dmail===e,render:(e,r)=>n.jsx("span",{style:{color:e===0?"red":"inherit"},children:e===null?n.jsx(d,{}):e}),width:100}]}];return n.jsx("div",{children:n.jsx(_e,{children:n.jsx(d,{spinning:le,children:n.jsx(Ce,{rowSelection:ye,dataSource:ie,pagination:!1,bordered:!0,style:{marginBottom:"0px",zIndex:2},size:"small",columns:ge,scroll:{y:ue},footer:()=>n.jsx(Ee,{children:n.jsx("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",gap:"10px"},children:n.jsx(te,{type:"primary",onClick:ke,loading:z,size:"large",style:{width:"20%"},icon:n.jsx(Se,{}),children:z?"正在刷新":"刷新选中地址"})})})})})})})}export{We as default};
