import{d as K,_ as M,e as L,c as Q,K as q,z as P,E as I,N as z,g as F}from"./useFlexGapSupport-69780201.js";import{r as o,b as W}from"./index-aeda1e87.js";var B=o.forwardRef(function(e,d){var y=e.prefixCls,i=e.style,f=e.className,l=e.duration,s=l===void 0?4.5:l,E=e.eventKey,S=e.content,k=e.closable,A=e.closeIcon,h=A===void 0?"x":A,p=e.props,_=e.onClick,v=e.onNoticeClose,b=e.times,$=o.useState(!1),u=K($,2),C=u[0],g=u[1],N=function(){v(E)},m=function(c){(c.key==="Enter"||c.code==="Enter"||c.keyCode===q.ENTER)&&N()};o.useEffect(function(){if(!C&&s>0){var t=setTimeout(function(){N()},s*1e3);return function(){clearTimeout(t)}}},[s,C,b]);var n="".concat(y,"-notice");return o.createElement("div",M({},p,{ref:d,className:L(n,f,Q({},"".concat(n,"-closable"),k)),style:i,onMouseEnter:function(){g(!0)},onMouseLeave:function(){g(!1)},onClick:_}),o.createElement("div",{className:"".concat(n,"-content")},S),k&&o.createElement("a",{tabIndex:0,className:"".concat(n,"-close"),onKeyDown:m,onClick:function(c){c.preventDefault(),c.stopPropagation(),N()}},h))});const J=B;var U=o.forwardRef(function(e,d){var y=e.prefixCls,i=y===void 0?"rc-notification":y,f=e.container,l=e.motion,s=e.maxCount,E=e.className,S=e.style,k=e.onAllRemoved,A=o.useState([]),h=K(A,2),p=h[0],_=h[1],v=function(t){var c,a=p.find(function(r){return r.key===t});a==null||(c=a.onClose)===null||c===void 0||c.call(a),_(function(r){return r.filter(function(x){return x.key!==t})})};o.useImperativeHandle(d,function(){return{open:function(t){_(function(c){var a=P(c),r=a.findIndex(function(w){return w.key===t.key}),x=I({},t);if(r>=0){var R;x.times=(((R=c[r])===null||R===void 0?void 0:R.times)||0)+1,a[r]=x}else x.times=0,a.push(x);return s>0&&a.length>s&&(a=a.slice(-s)),a})},close:function(t){v(t)},destroy:function(){_([])}}});var b=o.useState({}),$=K(b,2),u=$[0],C=$[1];o.useEffect(function(){var n={};p.forEach(function(t){var c=t.placement,a=c===void 0?"topRight":c;a&&(n[a]=n[a]||[],n[a].push(t))}),Object.keys(u).forEach(function(t){n[t]=n[t]||[]}),C(n)},[p]);var g=function(t){C(function(c){var a=I({},c),r=a[t]||[];return r.length||delete a[t],a})},N=o.useRef(!1);if(o.useEffect(function(){Object.keys(u).length>0?N.current=!0:N.current&&(k==null||k(),N.current=!1)},[u]),!f)return null;var m=Object.keys(u);return W.createPortal(o.createElement(o.Fragment,null,m.map(function(n){var t=u[n],c=t.map(function(r){return{config:r,key:r.key}}),a=typeof l=="function"?l(n):l;return o.createElement(z,M({key:n,className:L(i,"".concat(i,"-").concat(n),E==null?void 0:E(n)),style:S==null?void 0:S(n),keys:c,motionAppear:!0},a,{onAllRemoved:function(){g(n)}}),function(r,x){var R=r.config,w=r.className,O=r.style,D=R.key,j=R.times,H=R.className,G=R.style;return o.createElement(J,M({},R,{ref:x,prefixCls:i,className:L(w,H),style:I(I({},O),G),times:j,key:D,eventKey:D,onNoticeClose:v}))})})),f)}),V=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved"],X=function(){return document.body},T=0;function Y(){for(var e={},d=arguments.length,y=new Array(d),i=0;i<d;i++)y[i]=arguments[i];return y.forEach(function(f){f&&Object.keys(f).forEach(function(l){var s=f[l];s!==void 0&&(e[l]=s)})}),e}function te(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=e.getContainer,y=d===void 0?X:d,i=e.motion,f=e.prefixCls,l=e.maxCount,s=e.className,E=e.style,S=e.onAllRemoved,k=F(e,V),A=o.useState(),h=K(A,2),p=h[0],_=h[1],v=o.useRef(),b=o.createElement(U,{container:p,ref:v,prefixCls:f,motion:i,maxCount:l,className:s,style:E,onAllRemoved:S}),$=o.useState([]),u=K($,2),C=u[0],g=u[1],N=o.useMemo(function(){return{open:function(n){var t=Y(k,n);(t.key===null||t.key===void 0)&&(t.key="rc-notification-".concat(T),T+=1),g(function(c){return[].concat(P(c),[{type:"open",config:t}])})},close:function(n){g(function(t){return[].concat(P(t),[{type:"close",key:n}])})},destroy:function(){g(function(n){return[].concat(P(n),[{type:"destroy"}])})}}},[]);return o.useEffect(function(){_(y())}),o.useEffect(function(){v.current&&C.length&&(C.forEach(function(m){switch(m.type){case"open":v.current.open(m.config);break;case"close":v.current.close(m.key);break;case"destroy":v.current.destroy();break}}),g([]))},[C]),[N,b]}export{J as N,te as u};
